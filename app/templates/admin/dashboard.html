{% extends "base.html" %}

{% block title %}–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å - Ladder.gg{% endblock %}

{% block content %}
<div class="container admin-dashboard">
    <h1>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
    <p class="admin-info">–£—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞: <strong>{{ current_user.get_admin_level_name() }}</strong></p>

    <section class="admin-stats">
        <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">{{ stats.total_users }}</div>
                <div class="stat-label">–í—Å–µ–≥–æ –∏–≥—Ä–æ–∫–æ–≤</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ stats.total_matches }}</div>
                <div class="stat-label">–í—Å–µ–≥–æ –º–∞—Ç—á–µ–π</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ stats.active_bans }}</div>
                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –±–∞–Ω–æ–≤</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ stats.open_tickets }}</div>
                <div class="stat-label">–û—Ç–∫—Ä—ã—Ç—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ stats.total_lobbies }}</div>
                <div class="stat-label">–í—Å–µ–≥–æ –ª–æ–±–±–∏</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ stats.active_lobbies }}</div>
                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –ª–æ–±–±–∏</div>
            </div>
        </div>
    </section>

    <section class="admin-actions">
        <h2>–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø</h2>
        <div class="action-buttons">
            {% if current_user.admin_level >= 3 %}
                <a href="{{ url_for('admin.users') }}" class="btn btn-secondary">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</a>
            {% endif %}
            {% if current_user.admin_level >= 1 %}
                <a href="{{ url_for('admin.support_tickets') }}" class="btn btn-secondary">–¢–∏–∫–µ—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏</a>
                <a href="{{ url_for('admin.lobby_screenshots') }}" class="btn btn-secondary">üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã –ª–æ–±–±–∏</a>
                <a href="{{ url_for('admin.admin_lobbies') }}" class="btn btn-secondary">üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–±–±–∏</a>
            {% endif %}
        </div>
    </section>

    {% if recent_actions %}
    <section class="recent-actions">
        <h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
        <table class="actions-table">
            <thead>
                <tr>
                    <th>–î–∞—Ç–∞</th>
                    <th>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</th>
                    <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                    <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                    <th>–ü—Ä–∏—á–∏–Ω–∞</th>
                </tr>
            </thead>
            <tbody>
                {% for action in recent_actions %}
                    <tr>
                        <td>{{ action.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
                        <td>{{ action.admin.username }}</td>
                        <td><span class="action-badge">{{ action.action }}</span></td>
                        <td>{{ action.target_user_id }}</td>
                        <td>{{ action.reason or '-' }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
    {% endif %}
</div>
{% endblock %}
